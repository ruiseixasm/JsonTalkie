‚úÖ THE FIX

Replace this:

writeReg(ERXFCON, ERXFCON_UCEN|ERXFCON_CRCEN|ERXFCON_PMEN);


With this:

writeReg(ERXFCON, ERXFCON_UCEN | ERXFCON_CRCEN | ERXFCON_BCEN);

‚úî Remove PMEN

Because it restricts reception to predefined pattern-matched packets (no broadcast MAC match).

‚úî Add BCEN

So the chip accepts broadcast Ethernet frames.

‚úî Keep CRCEN

CRC is fine.





üß® Optionally remove pattern filter registers too

You can safely remove or comment these:

writeRegPair(EPMM0, 0x303f);
writeRegPair(EPMCSL, 0xf7f9);


They only matter if PMEN is used.
Since we removed PMEN, they do nothing now.

üöÄ Final ‚Äúgood‚Äù block:
writeReg(ERXFCON, ERXFCON_UCEN | ERXFCON_CRCEN | ERXFCON_BCEN);
// Pattern matching disabled ‚Äì not needed for broadcast
// writeRegPair(EPMM0, 0x303f);
// writeRegPair(EPMCSL, 0xf7f9);

